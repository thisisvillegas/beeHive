<!DOCTYPE html>
<html>
<head>
  <title>Shelly In-Line Wiring - Before & After</title>
  <style>
    body {
      background: #0a0a0f;
      color: #eee;
      font-family: 'Segoe UI', system-ui, sans-serif;
      padding: 30px;
      margin: 0;
    }
    h1 { color: #00d9ff; margin-bottom: 5px; }
    h2 { color: #ff6b6b; margin-top: 50px; margin-bottom: 20px; }
    .subtitle { color: #888; margin-bottom: 30px; }
    .diagram-container {
      background: #1a1a2e;
      border-radius: 16px;
      padding: 30px;
      margin: 20px 0;
      border: 1px solid #333;
    }
    .step-box {
      background: #2a2a4a;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      border-left: 4px solid #00d9ff;
    }
    .step-num {
      display: inline-block;
      width: 36px;
      height: 36px;
      background: #00d9ff;
      color: #000;
      border-radius: 50%;
      text-align: center;
      line-height: 36px;
      font-weight: bold;
      font-size: 18px;
      margin-right: 15px;
    }
    .step-title {
      font-size: 18px;
      font-weight: bold;
      color: #fff;
      vertical-align: middle;
    }
    .step-detail {
      margin-top: 12px;
      margin-left: 51px;
      color: #aaa;
      line-height: 1.6;
    }
    .warning {
      background: #4a2a2a;
      border-left: 4px solid #ff6b6b;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }
    .success {
      background: #1a4a2a;
      border-left: 4px solid #4ade80;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }
    .highlight {
      color: #ffd93d;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Shelly In-Line Wiring</h1>
  <p class="subtitle">Bedroom Light Circuit - Cherokee Forest River RV</p>

  <!-- ============================== -->
  <!-- BEFORE DIAGRAM -->
  <!-- ============================== -->
  <h2>BEFORE - Current Wiring</h2>
  <div class="diagram-container">
    <svg viewBox="0 0 900 280" xmlns="http://www.w3.org/2000/svg">
      <!-- Background -->
      <defs>
        <marker id="arrow1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#ffd93d"/>
        </marker>
        <filter id="glow1">
          <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
          <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <!-- Title -->
      <text x="450" y="30" text-anchor="middle" fill="#888" font-size="14">Current Setup (no Shelly)</text>

      <!-- 12V Battery -->
      <rect x="30" y="100" width="90" height="80" rx="8" fill="#3a2a1a" stroke="#ffd93d" stroke-width="2"/>
      <text x="75" y="135" text-anchor="middle" fill="#ffd93d" font-weight="bold" font-size="13">12V</text>
      <text x="75" y="155" text-anchor="middle" fill="#ffd93d" font-size="11">BATTERY</text>
      <text x="75" y="172" text-anchor="middle" fill="#888" font-size="9">+ -</text>

      <!-- Wire to fuse panel -->
      <line x1="120" y1="140" x2="180" y2="140" stroke="#ff6b6b" stroke-width="4"/>

      <!-- Fuse Panel Box -->
      <rect x="180" y="80" width="180" height="120" rx="8" fill="#1a2a3a" stroke="#3a6a9a" stroke-width="2"/>
      <text x="270" y="105" text-anchor="middle" fill="#3a9aff" font-size="11">DC FUSE PANEL</text>

      <!-- Bus bar -->
      <rect x="195" y="115" width="150" height="15" rx="2" fill="#8B4513" stroke="#a0522d"/>
      <text x="270" y="127" text-anchor="middle" fill="#ffd93d" font-size="8">12V+ BUS</text>

      <!-- BED Fuse -->
      <rect x="240" y="140" width="60" height="40" rx="4" fill="#2a2a4a" stroke="#ff6b6b" stroke-width="2"/>
      <rect x="250" y="148" width="40" height="24" rx="2" fill="#4a9fff"/>
      <text x="270" y="165" text-anchor="middle" fill="#000" font-size="10" font-weight="bold">15A</text>
      <text x="270" y="195" text-anchor="middle" fill="#ff6b6b" font-size="10" font-weight="bold">BED</text>

      <!-- Terminal screw (output) -->
      <circle cx="270" cy="180" r="8" fill="#333" stroke="#888" stroke-width="2"/>

      <!-- BED wire going out - THIS IS THE KEY WIRE -->
      <path d="M 270 188 L 270 220 L 360 220 L 360 140 L 480 140"
            fill="none" stroke="#ff6b6b" stroke-width="5" stroke-linecap="round" filter="url(#glow1)"/>

      <!-- Label the BED wire -->
      <rect x="380" y="200" width="120" height="30" rx="4" fill="#4a2a2a" stroke="#ff6b6b" stroke-width="1"/>
      <text x="440" y="220" text-anchor="middle" fill="#ff6b6b" font-size="11" font-weight="bold">BED WIRE</text>
      <line x1="400" y1="200" x2="350" y2="180" stroke="#ff6b6b" stroke-width="1" stroke-dasharray="4,2"/>

      <!-- Bedroom Light -->
      <rect x="480" y="100" width="140" height="80" rx="10" fill="#2a2a1a" stroke="#ffd93d" stroke-width="2"/>
      <text x="550" y="130" text-anchor="middle" fill="#ffd93d" font-weight="bold" font-size="12">BEDROOM</text>
      <text x="550" y="148" text-anchor="middle" fill="#ffd93d" font-size="12">LIGHT</text>
      <text x="550" y="170" text-anchor="middle" font-size="24">ðŸ’¡</text>

      <!-- Ground return -->
      <path d="M 550 180 L 550 250 L 75 250 L 75 180"
            fill="none" stroke="#666" stroke-width="4" stroke-linecap="round"/>
      <text x="300" y="268" text-anchor="middle" fill="#666" font-size="10">GROUND (return to battery -)</text>

      <!-- Flow arrows -->
      <text x="150" y="125" fill="#ffd93d" font-size="10">â†’</text>
      <text x="420" y="125" fill="#ffd93d" font-size="10">â†’</text>

      <!-- Electricity flow label -->
      <path d="M 130 60 L 500 60" fill="none" stroke="#ffd93d" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrow1)"/>
      <text x="315" y="52" text-anchor="middle" fill="#ffd93d" font-size="11">Electricity flows this way â†’</text>

    </svg>
  </div>

  <!-- ============================== -->
  <!-- AFTER DIAGRAM -->
  <!-- ============================== -->
  <h2>AFTER - With Shelly In-Line</h2>
  <div class="diagram-container">
    <svg viewBox="0 0 1000 350" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="arrow2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#ffd93d"/>
        </marker>
        <filter id="glow2">
          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
          <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <!-- Animated dash for new wires -->
        <style>
          .new-wire {
            stroke-dasharray: 10, 5;
            animation: dash 1s linear infinite;
          }
          @keyframes dash {
            to { stroke-dashoffset: -15; }
          }
        </style>
      </defs>

      <!-- Title -->
      <text x="500" y="30" text-anchor="middle" fill="#4ade80" font-size="14" font-weight="bold">NEW Setup (with Shelly in-line)</text>

      <!-- 12V Battery -->
      <rect x="30" y="120" width="90" height="80" rx="8" fill="#3a2a1a" stroke="#ffd93d" stroke-width="2"/>
      <text x="75" y="155" text-anchor="middle" fill="#ffd93d" font-weight="bold" font-size="13">12V</text>
      <text x="75" y="175" text-anchor="middle" fill="#ffd93d" font-size="11">BATTERY</text>

      <!-- Wire to fuse panel -->
      <line x1="120" y1="160" x2="180" y2="160" stroke="#ff6b6b" stroke-width="4"/>

      <!-- Fuse Panel Box -->
      <rect x="180" y="100" width="180" height="120" rx="8" fill="#1a2a3a" stroke="#3a6a9a" stroke-width="2"/>
      <text x="270" y="125" text-anchor="middle" fill="#3a9aff" font-size="11">DC FUSE PANEL</text>

      <!-- Bus bar -->
      <rect x="195" y="135" width="150" height="15" rx="2" fill="#8B4513" stroke="#a0522d"/>
      <text x="270" y="147" text-anchor="middle" fill="#ffd93d" font-size="8">12V+ BUS</text>

      <!-- BED Fuse -->
      <rect x="240" y="160" width="60" height="40" rx="4" fill="#2a2a4a" stroke="#ff6b6b" stroke-width="2"/>
      <rect x="250" y="168" width="40" height="24" rx="2" fill="#4a9fff"/>
      <text x="270" y="185" text-anchor="middle" fill="#000" font-size="10" font-weight="bold">15A</text>

      <!-- Terminal screw (output) - HIGHLIGHTED -->
      <circle cx="270" cy="200" r="10" fill="#333" stroke="#00d9ff" stroke-width="3" filter="url(#glow2)"/>
      <text x="270" y="230" text-anchor="middle" fill="#00d9ff" font-size="9">Terminal</text>

      <!-- ============================== -->
      <!-- NEW WIRE: Terminal to Shelly DC+ -->
      <!-- ============================== -->
      <path d="M 280 200 L 340 200 L 340 160 L 450 160"
            fill="none" stroke="#ff6b6b" stroke-width="5" stroke-linecap="round" class="new-wire"/>

      <!-- Label: New wire -->
      <rect x="350" y="120" width="90" height="35" rx="4" fill="#1a4a2a" stroke="#4ade80" stroke-width="2"/>
      <text x="395" y="138" text-anchor="middle" fill="#4ade80" font-size="9" font-weight="bold">NEW WIRE</text>
      <text x="395" y="150" text-anchor="middle" fill="#4ade80" font-size="8">to Shelly DC+</text>

      <!-- ============================== -->
      <!-- SHELLY MODULE -->
      <!-- ============================== -->
      <rect x="450" y="110" width="160" height="140" rx="12" fill="#1a2a4a" stroke="#00d9ff" stroke-width="4" filter="url(#glow2)"/>
      <text x="530" y="140" text-anchor="middle" fill="#00d9ff" font-weight="bold" font-size="14">SHELLY</text>
      <text x="530" y="158" text-anchor="middle" fill="#00d9ff" font-size="11">PLUS RGBW PM</text>

      <!-- DC+ terminal -->
      <circle cx="475" cy="175" r="10" fill="#222" stroke="#ff6b6b" stroke-width="3"/>
      <text x="510" y="179" fill="#ff6b6b" font-size="11" font-weight="bold">DC+</text>
      <text x="510" y="192" fill="#888" font-size="8">(power in)</text>

      <!-- GND terminal -->
      <circle cx="475" cy="215" r="10" fill="#222" stroke="#60a5fa" stroke-width="3"/>
      <text x="510" y="219" fill="#60a5fa" font-size="11" font-weight="bold">GND</text>

      <!-- O1 Output terminal -->
      <circle cx="585" cy="175" r="10" fill="#222" stroke="#4ade80" stroke-width="3"/>
      <text x="560" y="165" fill="#4ade80" font-size="10" font-weight="bold">O1</text>
      <text x="555" y="195" fill="#888" font-size="8">(output)</text>

      <!-- Connect new wire to DC+ -->
      <line x1="450" y1="160" x2="465" y2="175" stroke="#ff6b6b" stroke-width="4"/>

      <!-- ============================== -->
      <!-- ORIGINAL BED WIRE: Now goes to Shelly O1 -->
      <!-- ============================== -->
      <path d="M 595 175 L 650 175 L 650 160 L 780 160"
            fill="none" stroke="#4ade80" stroke-width="5" stroke-linecap="round"/>

      <!-- Label: Original wire reconnected -->
      <rect x="660" y="100" width="110" height="45" rx="4" fill="#2a2a1a" stroke="#ffd93d" stroke-width="2"/>
      <text x="715" y="118" text-anchor="middle" fill="#ffd93d" font-size="9" font-weight="bold">ORIGINAL</text>
      <text x="715" y="132" text-anchor="middle" fill="#ffd93d" font-size="9" font-weight="bold">BED WIRE</text>
      <text x="715" y="143" text-anchor="middle" fill="#888" font-size="7">now to Shelly O1</text>

      <!-- Bedroom Light -->
      <rect x="780" y="120" width="140" height="80" rx="10" fill="#2a2a1a" stroke="#ffd93d" stroke-width="2"/>
      <text x="850" y="150" text-anchor="middle" fill="#ffd93d" font-weight="bold" font-size="12">BEDROOM</text>
      <text x="850" y="168" text-anchor="middle" fill="#ffd93d" font-size="12">LIGHT</text>
      <text x="850" y="190" text-anchor="middle" font-size="24">ðŸ’¡</text>

      <!-- ============================== -->
      <!-- GROUND WIRE: Shelly to Ground Bus -->
      <!-- ============================== -->
      <path d="M 475 225 L 475 280 L 200 280 L 200 220"
            fill="none" stroke="#60a5fa" stroke-width="5" stroke-linecap="round" class="new-wire"/>

      <!-- Ground bus in fuse panel -->
      <rect x="195" y="205" width="25" height="20" rx="2" fill="#333" stroke="#60a5fa" stroke-width="2"/>
      <text x="240" y="218" fill="#60a5fa" font-size="8">GND BUS</text>

      <!-- Label: New ground wire -->
      <rect x="280" y="260" width="100" height="30" rx="4" fill="#1a2a4a" stroke="#60a5fa" stroke-width="2"/>
      <text x="330" y="280" text-anchor="middle" fill="#60a5fa" font-size="9" font-weight="bold">NEW GND WIRE</text>

      <!-- Light ground return -->
      <path d="M 850 200 L 850 310 L 75 310 L 75 200"
            fill="none" stroke="#666" stroke-width="4" stroke-linecap="round"/>
      <text x="450" y="328" text-anchor="middle" fill="#666" font-size="10">GROUND (return to battery -)</text>

      <!-- ============================== -->
      <!-- FLOW INDICATORS -->
      <!-- ============================== -->
      <text x="155" y="145" fill="#ffd93d" font-size="12">â†’</text>
      <text x="410" y="145" fill="#ffd93d" font-size="12">â†’</text>
      <text x="620" y="145" fill="#ffd93d" font-size="12">â†’</text>
      <text x="750" y="145" fill="#ffd93d" font-size="12">â†’</text>

      <!-- Power flow path -->
      <path d="M 130 70 L 800 70" fill="none" stroke="#ffd93d" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrow2)"/>
      <text x="450" y="62" text-anchor="middle" fill="#ffd93d" font-size="11">Electricity flows: Battery â†’ Fuse â†’ Shelly â†’ Light â†’</text>

      <!-- Shelly control indicator -->
      <text x="530" y="245" text-anchor="middle" fill="#00d9ff" font-size="10">ðŸ“± WiFi / MQTT Control</text>

    </svg>
  </div>

  <!-- ============================== -->
  <!-- STEP BY STEP -->
  <!-- ============================== -->
  <h2 style="color: #00d9ff;">Step-by-Step Wiring</h2>

  <div class="warning">
    <strong>FIRST:</strong> Turn off the 12V disconnect switch or disconnect the battery!
  </div>

  <div class="step-box">
    <span class="step-num">1</span>
    <span class="step-title">Disconnect the BED wire</span>
    <div class="step-detail">
      Find the wire connected to the BED fuse terminal screw (load side).<br>
      Unscrew and remove it. <span class="highlight">Don't lose this wire - you'll reconnect it to the Shelly!</span>
    </div>
  </div>

  <div class="step-box">
    <span class="step-num">2</span>
    <span class="step-title">Run NEW wire: Terminal â†’ Shelly DC+</span>
    <div class="step-detail">
      Cut a piece of <span class="highlight">red 18 AWG wire</span> (maybe 6-12 inches depending on where you mount Shelly).<br>
      Connect one end to the BED terminal screw you just freed up.<br>
      Connect the other end to <span class="highlight">Shelly DC+</span> terminal.
    </div>
  </div>

  <div class="step-box">
    <span class="step-num">3</span>
    <span class="step-title">Reconnect ORIGINAL BED wire â†’ Shelly O1</span>
    <div class="step-detail">
      Take that original BED wire you disconnected in Step 1.<br>
      Connect it to <span class="highlight">Shelly O1</span> (output 1).<br>
      This wire goes to your bedroom lights - now controlled by Shelly!
    </div>
  </div>

  <div class="step-box">
    <span class="step-num">4</span>
    <span class="step-title">Run NEW ground wire: Ground Bus â†’ Shelly GND</span>
    <div class="step-detail">
      Cut a piece of <span class="highlight">black 18 AWG wire</span>.<br>
      Connect one end to the ground bus bar in your fuse panel.<br>
      Connect the other end to <span class="highlight">Shelly GND</span> terminal.
    </div>
  </div>

  <div class="step-box">
    <span class="step-num">5</span>
    <span class="step-title">Mount the Shelly & Power On</span>
    <div class="step-detail">
      Secure the Shelly with velcro or zip ties near the fuse panel.<br>
      Reconnect battery / turn on 12V disconnect.<br>
      Shelly should create WiFi hotspot for setup!
    </div>
  </div>

  <!-- ============================== -->
  <!-- WIRE SUMMARY -->
  <!-- ============================== -->
  <h2 style="color: #ffd93d;">Wire Summary</h2>
  <div class="diagram-container">
    <svg viewBox="0 0 600 200" xmlns="http://www.w3.org/2000/svg">
      <!-- Shelly in center -->
      <rect x="200" y="40" width="200" height="120" rx="12" fill="#1a2a4a" stroke="#00d9ff" stroke-width="3"/>
      <text x="300" y="70" text-anchor="middle" fill="#00d9ff" font-weight="bold" font-size="14">SHELLY</text>

      <!-- DC+ -->
      <circle cx="230" cy="100" r="12" fill="#222" stroke="#ff6b6b" stroke-width="3"/>
      <text x="230" y="105" text-anchor="middle" fill="#ff6b6b" font-size="10" font-weight="bold">DC+</text>
      <line x1="218" y1="100" x2="80" y2="100" stroke="#ff6b6b" stroke-width="4"/>
      <text x="80" y="90" text-anchor="end" fill="#ff6b6b" font-size="10">From BED fuse terminal</text>
      <text x="80" y="115" text-anchor="end" fill="#888" font-size="9">(new red wire)</text>

      <!-- GND -->
      <circle cx="230" cy="140" r="12" fill="#222" stroke="#60a5fa" stroke-width="3"/>
      <text x="230" y="145" text-anchor="middle" fill="#60a5fa" font-size="10" font-weight="bold">GND</text>
      <line x1="218" y1="140" x2="80" y2="140" stroke="#60a5fa" stroke-width="4"/>
      <text x="80" y="150" text-anchor="end" fill="#60a5fa" font-size="10">From ground bus</text>
      <text x="80" y="165" text-anchor="end" fill="#888" font-size="9">(new black wire)</text>

      <!-- O1 -->
      <circle cx="370" cy="100" r="12" fill="#222" stroke="#4ade80" stroke-width="3"/>
      <text x="370" y="105" text-anchor="middle" fill="#4ade80" font-size="10" font-weight="bold">O1</text>
      <line x1="382" y1="100" x2="520" y2="100" stroke="#4ade80" stroke-width="4"/>
      <text x="520" y="90" fill="#4ade80" font-size="10">To bedroom light</text>
      <text x="520" y="115" fill="#ffd93d" font-size="9">(original BED wire!)</text>

    </svg>
  </div>

  <div class="success">
    <strong>That's it! Only 3 wires to connect:</strong>
    <ol style="margin: 10px 0;">
      <li><span style="color:#ff6b6b;font-weight:bold;">Red wire</span> - BED fuse terminal â†’ Shelly DC+ (new)</li>
      <li><span style="color:#60a5fa;font-weight:bold;">Black wire</span> - Ground bus â†’ Shelly GND (new)</li>
      <li><span style="color:#4ade80;font-weight:bold;">Original BED wire</span> - Shelly O1 â†’ Bedroom lights (existing, just moved)</li>
    </ol>
  </div>

</body>
</html>
